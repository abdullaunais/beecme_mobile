<!--
  Generated template for the ManageAddressPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="ui-theme">
    <button ion-button menuToggle showWhen="android">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Manage Address</ion-title>
  </ion-navbar>
</ion-header>


<ion-content class="page-manage-address">
  <ion-card style="padding:0.5rem; margin-bottom: 0;">
    <ion-list no-lines style="margin:0">
      <ion-item>
        <ion-icon name="add-circle" (tap)="toggleNew();" [color]="(createAddress) ? 'primary' : 'blue-grey'" item-start></ion-icon>
        <ion-label [color]="(createAddress) ? 'primary' : 'blue-grey'" (tap)="toggleNew();">Add New Address</ion-label>
        <ion-toggle [(ngModel)]="createAddress"></ion-toggle>
      </ion-item>
    </ion-list>
  </ion-card>

  <div style="display: flex; justify-content: space-between;">
    <ion-spinner *ngIf="isLoading" class="loading-spinner" color="primary"></ion-spinner>
  </div>
  <div style="display: block; margin-top: 3vmin; padding-top: 5vmin; border-top:1px solid #ddd;" *ngIf="isError && !isLoading">
    <ion-label style="text-align: center; width: 100%; color: #999;">Could not connect to server.</ion-label>
    <button style="display:block; margin:0 auto; padding: 1rem 2rem; border-radius: 0.5rem;" (tap)="retryServer();">TRY AGAIN</button>
  </div>
  <ion-card style="padding:0.5rem;" *ngIf="!createAddress && !isLoading && !isError">
    <ion-list style="margin:0">
      <ion-list-header style="border-top:none;  margin-bottom: 0;">
        My Address List
      </ion-list-header>
      <ion-item *ngFor="let address of addressList" style="border-bottom:1px solid #eee;">
        <h2>{{address.nickName}}</h2>
        <p [innerHTML]="getAddressFormat(address)" style="margin-top:1rem"></p>
        <ion-note item-end>
          <button ion-button round icon-only (tap)="removeAddress(address);" class="item-action-button">
            <ion-icon name="trash" color="danger"></ion-icon>
          </button>
        </ion-note>
      </ion-item>
    </ion-list>
  </ion-card>

  <ion-card style="padding:0.5rem;" *ngIf="createAddress">
    <ion-list no-lines style="margin:0">
      <ion-list-header style="border-top:none;  margin-bottom: 0;">
        <ion-icon name="home" color="danger" item-start></ion-icon>
        Address Details
      </ion-list-header>
      <ion-item>
        <ion-input style="color: #666;" [(ngModel)]="nickname" placeholder="Nickname"></ion-input>
      </ion-item>
      <ion-item>
        <ion-input style="color: #666;" [(ngModel)]="address" placeholder="Street"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label style="font-size: 1.2rem;  color: #999;">{{locationLabel}}</ion-label>
      </ion-item>
    </ion-list>
  </ion-card>
</ion-content>