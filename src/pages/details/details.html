<!--
  Generated template for the Details page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="details-header">
    <ion-navbar color="ui-theme" id="nav-content">
        <button ion-button menuToggle showWhen="android">
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>Details - {{ toTitleCase(item.nameEn) }}</ion-title>
        <!--<button ion-button icon-only menuToggle>-->
        <!--<ion-icon name="arrow-round-back"></ion-icon>-->
        <!--</button>-->
        <ion-buttons end>
            <button ion-button icon-only (tap)="goToCart()">
                <ion-icon name="cart"></ion-icon>
                <ion-badge *ngIf="cartCount > 0" color="primary" class="badge badge-assertive header-badge">{{ cartCount }}</ion-badge>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>


<ion-content no-margin no-padding class="page-details">
    <div class="header-image" id="headerImage" #headerImage (press)="showImages()">
    </div>

    <div no-padding>
        <!--<img class="item-image-main" src="{{item.img1}}" (tap)="showImages()">-->
        <ion-card-content class="main-head">
            <div ion-item no-lines class="item-title animated fadeIn">
                {{ toTitleCase(item.nameEn) }}
                <button ion-button color="light" (tap)="validateCart()" item-end class="btn-cart-add">
                    <ion-icon name="cart"></ion-icon>&nbsp;&nbsp;{{ item.price }} {{shop.currency}}/{{ item.unit }}
                </button>
            </div>
            <div style="padding-bottom:1rem;">
                <div class="item-status-wrapper animated fadeIn" *ngIf="item.qty > 0">
                    <ion-icon name="checkmark-circle" color="secondary"></ion-icon>
                    <div class="item-status color-secondary">&nbsp;AVAILABLE</div>
                </div>
                <div class="item-status-wrapper animated fadeIn" *ngIf="item.qty > 0">
                    <ion-icon name="ios-leaf" color="primary"></ion-icon>
                    <div class="item-status color-primary">&nbsp;FRESH</div>
                </div>
                <div class="item-status-wrapper animated fadeIn" *ngIf="item.bestBuy > 0">
                    <ion-icon name="star" color="gold"></ion-icon>
                    <div class="item-status color-gold">&nbsp;BEST BUY</div>
                </div>
            </div>
        </ion-card-content>
        <div class="item-description-paragraph animated fadeIn">
            {{ item.descriptionEn }}
        </div>
        <div class="item-comment-paragraph animated flipInX" *ngIf="item.comment">
            <ion-icon name="quote" color="dark"></ion-icon>&nbsp;&nbsp;
            <i>{{ item.comment }}</i>
        </div>

        <div (press)="showImages()" style="height: 15rem; overflow: overlay; white-space: nowrap;">
            <div style="display: inline-block;">
                <img *ngIf="item.img1" src="{{ item.img1 }}" imageViewer class="item-image-scroll">
            </div>
            <div style="display: inline-block;">
                <img *ngIf="item.img2" src="{{ item.img2 }}" imageViewer class="item-image-scroll">
            </div>
            <div style="display: inline-block;">
                <img *ngIf="item.img3" src="{{ item.img3 }}" imageViewer class="item-image-scroll">
            </div>
        </div>
        <ion-list style="margin:2rem 0;background-color: transparent;">
            <button ion-item no-lines (tap)="goToCategory();" style="border-top:1px solid #ddd; background-color: transparent;">
                <ion-avatar item-left *ngIf="!catLoading">
                    <img [src]="category.imageEn">
                </ion-avatar>
                <h2 *ngIf="!catLoading">{{category.nameEn}}</h2>
                <div class="item-status-wrapper" *ngIf="!catLoading">
                    <ion-icon name="basket" style="color: #666;"></ion-icon>
                    <div class="item-status" style="color: #666;">&nbsp;CATEGORY</div>
                </div>
                <ion-note item-end style="margin:0 !important;" *ngIf="!catLoading">
                    <button ion-button round icon-only class="item-action-button">
                        <ion-icon name="ios-arrow-forward" style="color: #666;"></ion-icon>
                    </button>
            </ion-note>
            <div style="display: flex; justify-content: space-between;">
                <ion-spinner name="dots" *ngIf="catLoading" class="loading-spinner" color="ui-theme"></ion-spinner>
            </div>
            </button>
            <button ion-item no-lines (tap)="goToShop();" (press)="shopDetails(shop);" style="border-top:1px solid #ddd; background-color: transparent;">
                <ion-avatar item-left *ngIf="!catLoading">
                    <img [src]="shop.profilePicture">
                </ion-avatar>
                <h2 *ngIf="!catLoading">{{shop.username}}</h2>
                <div class="item-status-wrapper" *ngIf="!catLoading">
                    <ion-icon name="cart" style="color: #666;"></ion-icon>
                    <div class="item-status" style="color: #666;">&nbsp;SELECTED SHOP</div>
                </div>
                <ion-note item-end style="margin:0 !important;" *ngIf="!catLoading">
                    <button ion-button round icon-only class="item-action-button">
                        <ion-icon name="ios-arrow-forward" style="color: #666;"></ion-icon>
                    </button>
            </ion-note>
            <div style="display: flex; justify-content: space-between;">
                <ion-spinner name="dots" *ngIf="catLoading" class="loading-spinner" color="ui-theme"></ion-spinner>
            </div>
            </button>
            <div style="width:100%; height:6rem">
            </div>
        </ion-list>
    </div>
    <ion-fab bottom right style="margin: 0.5rem;">
        <button ion-fab color="ui-theme" (tap)="validateCart()">
            <ion-icon name="cart"></ion-icon>
        </button>
    </ion-fab>
</ion-content>