<!--
  Generated template for the OrderSummary page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="page-order-summary-header">

  <ion-navbar color="ui-theme">
    <ion-title>Order</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (tap)="openCart()">
              <ion-icon name="cart"></ion-icon>
              <ion-badge *ngIf="cartCount > 0" color="primary" class="badge badge-assertive header-badge">{{ cartCount }}</ion-badge>
          </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content class="page-order-summary">
  <div style="display: flex; justify-content: space-between;">
    <ion-label *ngIf="cartItems.length === 0 && !isLoading" style="text-align: center; width: 100%; color: #999;">No Items in Cart.</ion-label>
    <ion-spinner *ngIf="isLoading" class="loading-spinner" color="ui-theme"></ion-spinner>
  </div>

  <div ion-item no-lines margin-left margin-right margin-top>
    <ion-avatar item-left>
      <img [src]="cartShop.profilePicture">
    </ion-avatar>
    <h2 class="item-status-head">{{cartShop.username}}</h2>
    <div class="item-status-wrapper">
      <ion-icon name="cart" color="secondary"></ion-icon>
      <div class="item-status color-secondary">&nbsp;ACTIVE SHOP</div>
    </div>
  </div>

  <ion-list no-lines margin-left margin-right margin-top style="border-top: 1px solid #eee;">
    <ion-item>
      <ion-icon name="pin" color="danger" item-start></ion-icon>
      <div style="font-weight: 700;">Delivery Location</div>

      <!--<ion-icon name="rose" item-end></ion-icon>-->
    </ion-item>
    <ion-item>
      <ion-icon item-start></ion-icon>
      <div class="list-content-desc" [innerHTML]="userAddressElement"></div>
    </ion-item>
  </ion-list>


  <ion-list no-lines margin-left margin-right style="border-top: 1px solid #eee; margin-bottom:0.2rem;">
    <ion-item>
      <ion-icon name="card" color="ui-theme" item-start></ion-icon>
      <div style="font-weight: 700;">Payment</div>

      <!--<ion-icon name="rose" item-end></ion-icon>-->
    </ion-item>
    <ion-item>
      <ion-icon item-start></ion-icon>
      <div class="list-content-desc">
        On Delivery
      </div>
    </ion-item>
  </ion-list>


  <ion-list no-lines margin-left margin-right style="border-top: 1px solid #eee;">
    <ion-item>
      <ion-icon name="list-box" color="blue-grey" item-start></ion-icon>
      <div style="font-weight: 700;">Order Summery</div>

      <!--<ion-icon name="rose" item-end></ion-icon>-->
    </ion-item>
    <ion-item>
      <div *ngFor="let item of cartItems" class="color-primary">
        <ion-badge name="list-box" color="warning" class="item-price-badge" item-start>{{item.price*item.quantity}} {{cartShop.currency }}</ion-badge>
        {{ toTitleCase(item.nameEn) }}
        <span item-end style="position:absolute; right:1rem;">{{ item.quantity + " " +  item.unit }}{{ (item.quantity > 1) ? "s" : "" }}</span>
      </div>
    </ion-item>
  </ion-list>

  <ion-list no-lines margin-left margin-right style="border-top: 1px solid #eee; margin-bottom:0.2rem;">
    <ion-item>
      <ion-icon name="pricetag" color="primary" item-start></ion-icon>
      <div style="font-weight: 700;">Total Price</div>

      <!--<ion-icon name="rose" item-end></ion-icon>-->
    </ion-item>

    <ion-item>
      <div class="color-primary">
        <ion-badge name="list-box" color="warning" class="item-price-badge" item-start style="opacity:0;">0</ion-badge>
        Purchase Amount
        <span item-end style="position:absolute; right:1rem;">{{totalAmount}} {{cartShop.currency }}</span>
      </div>
      <div class="color-primary" style="border-bottom:1px solid #ddd;">
        <ion-badge name="list-box" color="warning" class="item-price-badge" item-start style="opacity:0;">0</ion-badge>
        Delivery Fee
        <span item-end style="position:absolute; right:1rem;">{{cartShop.deliveryCharge}} {{cartShop.currency }}</span>
      </div>
      <div class="color-primary" style="margin-bottom:2rem;">
        <ion-badge name="list-box" color="warning" class="item-price-badge" item-start style="opacity:0;">0</ion-badge>
        Total Cost
        <span item-end style="position:absolute; right:1rem;">{{totalAmount + cartShop.deliveryCharge}} {{cartShop.currency }}</span>
      </div>
    </ion-item>
  </ion-list>

  <ion-list no-lines margin-left margin-right style="border-top: 1px solid #eee;">
    <ion-item>
      <ion-icon name="quote" color="secondary" item-start></ion-icon>
      <div style="font-weight: 700;">Comment</div>

      <!--<ion-icon name="rose" item-end></ion-icon>-->
    </ion-item>
    <ion-item>
      <ion-icon item-start></ion-icon>
      <div class="list-content-desc">
        <i>{{ checkoutComment }}</i>
      </div>
    </ion-item>
  </ion-list>

</ion-content>

<ion-footer class="summeryFooter">
  <button class="summeryButton" full (tap)="confirmOrder();">PLACE ORDER</button>
</ion-footer>