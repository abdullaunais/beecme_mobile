<!--
  Generated template for the OrderSummary page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="page-order-summary-header">

  <ion-navbar color="ui-theme">
    <ion-title>Order</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (tap)="openCart()">
              <ion-icon name="cart"></ion-icon>
              <ion-badge *ngIf="cartCount > 0" color="primary" class="badge badge-assertive header-badge">{{ cartCount }}</ion-badge>
          </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content class="page-order-summary">
  <div style="display: flex; justify-content: space-between;">
    <ion-label *ngIf="cartItems.length === 0 && !isLoading" style="text-align: center; width: 100%; color: #999;">No Items in Cart.</ion-label>
    <ion-spinner *ngIf="isLoading" class="loading-spinner" color="ui-theme"></ion-spinner>
  </div>

  <div ion-item no-lines margin-left margin-right margin-top style="background-color: #E8EAF6;margin: 0;padding: 0.5rem 3rem;">
    <ion-avatar item-left>
      <img [src]="cartShop.profilePicture">
    </ion-avatar>
    <h2 class="item-status-head">{{cartShop.username}}</h2>
    <div class="item-status-wrapper">
      <ion-icon name="cart" color="blue-grey"></ion-icon>
      <div class="item-status" style="color:#607D8B">&nbsp;ACTIVE SHOP</div>
    </div>
  </div>

  <ion-list no-lines margin-left margin-right style="border-top: 1px solid #eee;">
    <ion-item>
      <ion-icon name="list-box" color="blue-grey" item-start></ion-icon>
      <div style="font-weight: 700;">Order Details</div>
    </ion-item>
    <ion-item>
      <div *ngFor="let item of cartItems" class="color-primary" style="padding-left: 3rem;">
        {{ toTitleCase(item.nameEn) }}
        <ion-badge name="list-box" color="blue-grey" class="item-price-badge" item-start>{{ item.quantity + " " +  item.unit.toUpperCase() + " X " + item.price + " " + cartShop.currency }}</ion-badge>
        <span class="content-span">{{item.price*item.quantity}} {{cartShop.currency }}</span>
      </div>
    </ion-item>
  </ion-list>

  <ion-list no-lines margin-left margin-right style="border-top: 1px solid #eee; margin-bottom:0.2rem;">
    <ion-item>
      <ion-icon name="pricetag" color="primary" item-start></ion-icon>
      <div style="font-weight: 700;">Total Price</div>
    </ion-item>
    <ion-item>
      <div class="color-primary" style="padding:0.5rem 0 0.5rem 3rem;">
        Item Total
        <span class="content-span">{{totalAmount}} {{cartShop.currency }}</span>
      </div>
      <div class="color-primary" style="border-bottom:1px solid #ddd;padding:0.5rem 0 1rem 3rem;">
        Delivery Fee
        <span class="content-span">{{cartShop.deliveryCharge}} {{cartShop.currency }}</span>
      </div>
      <div class="color-primary" style="margin: 0.4rem 0;padding:0.5rem 0 0.5rem 3rem;">
        Total Cost
        <span class="content-span">{{totalAmount + cartShop.deliveryCharge}} {{cartShop.currency }}</span>
      </div>
    </ion-item>
  </ion-list>

  <ion-list no-lines margin-left margin-right margin-top style="border-top: 1px solid #eee;">
    <ion-item>
      <ion-icon name="pin" color="danger" item-start></ion-icon>
      <div style="font-weight: 700;">Delivery Address</div>
    </ion-item>
    <ion-item class="address-item">
      <ion-icon item-start></ion-icon>
      <div class="list-content-desc" [innerHTML]="userAddressElement"></div>
    </ion-item>
  </ion-list>


  <ion-list no-lines margin-left margin-right style="border-top: 1px solid #eee; margin-bottom:0.2rem;">
    <ion-item>
      <ion-icon name="card" color="ui-theme" item-start></ion-icon>
      <div style="font-weight: 700;">Payment on Delivery</div>
    </ion-item>
  </ion-list>


  <ion-list no-lines margin-left margin-right style="border-top: 1px solid #eee;" *ngIf="checkoutComment">
    <ion-item>
      <ion-icon name="quote" color="secondary" item-start></ion-icon>
      <div style="font-weight: 700;">Comment</div>

      <!--<ion-icon name="rose" item-end></ion-icon>-->
    </ion-item>
    <ion-item>
      <ion-icon item-start></ion-icon>
      <div class="list-content-desc">
        <i>{{ checkoutComment }}</i>
      </div>
    </ion-item>
  </ion-list>

</ion-content>

<ion-footer class="summeryFooter">
  <button class="summeryButton" full (tap)="confirmOrder();">PLACE ORDER</button>
</ion-footer>